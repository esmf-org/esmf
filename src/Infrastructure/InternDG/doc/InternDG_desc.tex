% $Id: InternDG_desc.tex,v 1.3.2.3 2010/02/01 20:51:10 svasquez Exp $
%
% Earth System Modeling Framework
% Copyright 2002-2010, University Corporation for Atmospheric Research, 
% Massachusetts Institute of Technology, Geophysical Fluid Dynamics 
% Laboratory, University of Michigan, National Centers for Environmental 
% Prediction, Los Alamos National Laboratory, Argonne National Laboratory, 
% NASA Goddard Space Flight Center.
% Licensed under the University of Illinois-NCSA License.

% <Describe class function and relation to other classes.>


The DistGrid class is an internal class and is aggregated by the Grid class.
The DistGrid class maintains the relationship of how a DELayout maps onto
a Grid representation and how that Grid is distributed.  DistGrids can
represent the same Grid but have different mappings (staggerings) and can
be aggregated by the same Grid object. The DistGrid class maintains the
mapping between the global Grid and the local data distribution;  it has
methods to aid in the collection and communication of global data.

\subsection{DistGrid Classes}
The DistGrid class aggregates the DELayout class as well as two internal subclasses,
the DistGridGlobal and DistGridLocal classes.  The separation between DistGridGlobal
and DistGridLocal allows the code to clearly differentiate between functions which
operate internal to a single DE on a local decomposition of data, and those which
must be aware of the global state of the distribution.
\begin{itemize}
\item {\bf DELayout}
\item {\bf DistGridGlobal} The DistGridGlobal class contains general information
about each of the partitions that the entire grid has been decomposed into. This
includes information about how each part relates to the whole, how many points/cells
there are per decomposition, etc.  This information allows DistGrid to compute
information about other decompositions on other PEs without having to do communication
first.
\item {\bf DistGridLocal} The DistGridLocal class contains detailed subgrid
information for the data located on this PE, such as the local cell count and the
number of cells along each axis and their position in the global Grid.  When we
implement multiple DEs per PE then we will have a list of these instead of a single
one in the DistGrid class.
\end{itemize}



Some methods which have a DistGrid interface will actually be
implemented at the underlying DELayout or Array level; they
will be inherited by the DistGrid class.  This allows the user
API (Application Programming Interface) to present functions at
the level which is most consistent to the application without
restricting where inside the ESMF the actual implementation
is done.


The DistGrid class has two instances of both DistGridLocal and
DistGridGlobal classes, one to represent the computational domain and one to represent
the total domain, which includes halo and ghost cells as well as computational cells.
