
================================================================================

                        README - ESMF v2.1.1 release

                    Earth System Modeling Framework (ESMF)

 Earth System Modeling Framework
 Copyright 2002-2005, University Corporation for Atmospheric Research,
 Massachusetts Institute of Technology, Geophysical Fluid Dynamics
 Laboratory, University of Michigan, National Centers for Environmental
 Prediction, Los Alamos National Laboratory, Argonne National Laboratory,
 NASA Goddard Space Flight Center.
 Licensed under the GPL.

================================================================================

More information about the ESMF project can be found at the ESMF web site:
        http://www.esmf.ucar.edu

The latest documentation for the project can be found at:
        http://www.esmf.ucar.edu -> Downloads & Documentation

The ESMF User's Guide contains information on building and installing the ESMF.
The ESMF Reference Manual contains information on the architecture of the ESMF,
example code, and details of the APIs (Application Programming Interfaces).

The ESMF library source code is also available for download at:
	http://sourceforge.net/projects/esmf

Follow the directions on that web page to download a tarball and for
access to the ESMF CVS repository.  The Sourceforge site also contains 
the bugs, support, and task lists for ESMF.

Contributions from ESMF users are available at:
	http://sourceforge.net/projects/esmfcontrib

Please contact esmf_support@ucar.edu with any questions or problems.

================================================================================

Quickstart information for the impatient:

 - Set required environment variable(s) (see next section below).

 - Type 'gmake' (the GNU make program) to build the ESMF library.

 - Type 'gmake check' to build and run the unit and system tests.

================================================================================

GNUmake
-------

The ESMF build system uses the GNU make program; it is generally named 'gmake'
but may also be simply 'make' or 'gnumake' on some platforms.  We do not
use configure or autoconf;  the selection of various options is done by
setting environment variables before building the framework. 


Environment Variables
---------------------

ESMF_DIR

The environment variable ESMF_DIR must be set to the full pathname of the 
top level ESMF directory before building the framework.  This is the only 
environment variable which is required to be set on all platforms under 
all conditions.

bsh/ksh example  :  export ESMF_DIR=/home/joeuser/esmf
csh/tcsh example :  setenv ESMF_DIR /home/joeuser/esmf

ESMF_COMPILER

On any platform which does not come with a single vendor's Fortran compiler
installed (e.g. Linux or Mac OS X) ESMF_COMPILER must be set to select
which Fortran compiler has been installed.  To see valid values for 
ESMF_COMPILER, cd to $ESMF_DIR/build_config and list the directories there.
The first part of each directory name corresponds to the output of 
'uname -s' for this platform.  The second part contains valid values 
for ESMF_COMPILER.

ESMF_COMM

On multiprocessor systems with a vendor-supplied MPI communications library,
that is the default for communications and ESMF_COMM should not be set.  
For other systems, ESMF comes with with a single-processor MPI-bypass 
library which is the default.   To run multiprocessor applications
select an MPI implementation by setting ESMF_COMM to one of 'mpich' or
'lam' before building ESMF.  Additional valid values may exist; check the
release notes for the specific platform on the web site for more details.
If the MPI files are not installed in a system directory (e.g. /usr/lib)
also set MPI_HOME to the directory containing the include, lib, and bin dirs.

ESMF_SITE

The esmfcontrib repository contains makefiles which have already been 
customized for certain machines.  If one exists for your site and you wish
to use it, download the corresponding files into the build_contrib directory
and set ESMF_SITE to your location.  See the sourceforge site
http://sourceforge.net/projects/esmfcontrib  for more information.

ESMF_BOPT

To make a debuggable version of the library set ESMF_BOPT to 'g' before
building.  The default is 'O' (capital oh) which builds an optimized library.
If ESMF_BOPT is O, ESMF_OPTLEVEL can also be set to a numeric value 
between 0 and 4 to select a specific optimization level.

ESMF_PREC

If this system supports the building of both 32-bit and 64-bit executables
(pointer wordsize), this variable can be set to select which format to use.
Valid values are '32' or '64'.


There are other environment variables which can be set to customize
the ESMF make process.  The ESMF User's Guide documents these in detail.


Supported makefile Targets
--------------------------

 info    : print out extensive system configuration information about what
           compilers, libraries, paths, flags, etc are being used

 clean   : remove all files built for this platform/compiler/wordsize.
 clobber : remove all files built for all architectures

 lib     : build the ESMF libraries only (default)
 all     : build the libraries, unit and system test, examples, and demos.
 doc     : build the documentation (requires specific latex macros packages
           and additional utilities).  See the ESMF web site for details;  it
           also contains pre-built pdf and html versions of all docs.

 unit_tests         : build and run the unit tests
 build_unit_tests   : build only
 run_unit_tests     : run only
 clean_unit_tests   : remove unit test executables only

 system_tests       : build and run the more comprehensive system tests
 build_system_tests : build only
 run_system_tests   : run only
 clean_system_tests : remove system test executables only

 examples           : build and run the examples
 build_examples     : build only
 run_examples       : run only
 clean_examples     : remove example executables only

 demos              : build and run the more comprehensive demos
 build_demos        : build only
 run_demos          : run only
 clean_demos        : remove demo executables only

 all_tests          : build and run all available tests and demos
 build_all_tests    : build only
 run_all_tests      : run only
 clean_all_tests    : remove all test and demo executables 

Note:

 The normal 'install' target is *NOT CURRENTLY SUPPORTED*.  Neither is the
 'uninstall' target.  They will be added in a future release of ESMF.



Directories
-----------

build_config:    Contains makefile fragments that can be customized by the 
                 user for specific platforms, compilers, and sites.
                 See the README in this directory for help with porting to
                 new platforms or compilers.

build:           Contains the generic portion of the build that a
                 user would not be expected to modify.

scripts:         Contains scripts for testing and uniprocessor runs, and some
                 templates.

src:             Contains the source code.


The following directories are created during the building and testing stages:

lib:             Contains the ESMF libraries.

mod:             Contains the Fortran module files.

quick_start:     Contains skeleton application files to use as a template.

test:            Contains unit and system test executables and output.

examples:	 Contains examples executables and output.

doc:             Contains documentation (if built).


Supported Platforms
-------------------

Check the "Downloads & Documentation" link on the ESMF web site for a 
current list of supported platforms.  You can also list the build_config
directory to see exactly which platforms and compiler combinations have 
makefiles supplied already.


Porting Information
-------------------

If the build_config directory does not already contain a directory for your
platform/compiler, see the README file in build_config for specific help with
which files will most likely need to be edited to support a new platform.

If your platform/compiler is already supported but you need to make some
adaptions for your local system, see the README file in build_config for
help in creating a site-specific directory and which files it will most
likely need to contain.


Contact Information
-------------------

Email esmf_support@ucar.edu with any questions or problems.

================================================================================
 $Id: README,v 1.60 2005/05/06 15:23:32 nscollins Exp $
